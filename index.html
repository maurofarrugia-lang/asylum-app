<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mauro's Idiot Guide to EU Asylum Pact</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #14b8a6 0%, #0d9488 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #14b8a6 0%, #0d9488 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .search-section {
            padding: 30px;
            background: #f8f9fa;
        }

        .search-container {
            position: relative;
            margin-bottom: 20px;
        }

        #searchInput {
            width: 100%;
            padding: 15px 50px 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s;
        }

        #searchInput:focus {
            outline: none;
            border-color: #14b8a6;
            box-shadow: 0 0 0 3px rgba(0,51,153,0.1);
        }

        .clear-btn {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            font-size: 20px;
            color: #999;
            cursor: pointer;
            display: none;
            padding: 5px 10px;
        }

        .clear-btn:hover {
            color: #14b8a6;
        }

        .search-suggestions {
            background: white;
            border: 2px solid #e0e0e0;
            border-top: none;
            border-radius: 0 0 10px 10px;
            position: absolute;
            width: 100%;
            max-height: 300px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .suggestion-item {
            padding: 12px 20px;
            cursor: pointer;
            border-bottom: 1px solid #f0f0f0;
            transition: background 0.2s;
        }

        .suggestion-item:hover {
            background: #f8f9fa;
        }

        .suggestion-item .type {
            font-size: 0.8em;
            color: #14b8a6;
            font-weight: bold;
            margin-bottom: 3px;
        }

        .suggestion-item .title {
            color: #333;
        }

        .search-options {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
            align-items: center;
        }

        .search-type {
            display: flex;
            gap: 10px;
        }

        .search-type label {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9em;
            color: #666;
            cursor: pointer;
        }

        .search-type input[type="radio"] {
            cursor: pointer;
        }

        .filter-tabs {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .filter-tab {
            padding: 10px 20px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }

        .filter-tab.active {
            background: #14b8a6;
            color: white;
            border-color: #14b8a6;
        }

        .filter-tab:hover {
            border-color: #14b8a6;
        }

        .content-area {
            padding: 30px;
        }

        .search-stats {
            color: #666;
            margin-bottom: 20px;
            font-size: 0.95em;
        }

        .search-stats strong {
            color: #14b8a6;
        }

        .result-item {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s;
            cursor: pointer;
        }

        .result-item:hover {
            border-color: #14b8a6;
            box-shadow: 0 5px 15px rgba(0,51,153,0.1);
            transform: translateX(5px);
        }

        .result-item .badge {
            display: inline-block;
            background: #ccfbf1;
            color: #14b8a6;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .result-item h4 {
            color: #14b8a6;
            margin-bottom: 10px;
        }

        .result-item .meta {
            color: #999;
            font-size: 0.85em;
            margin-bottom: 10px;
        }

        .result-item .content {
            color: #333;
            line-height: 1.6;
        }

        .result-item .highlight {
            background: #ffeb3b;
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: 500;
        }

        .result-item .relevance {
            font-size: 0.8em;
            color: #666;
            margin-top: 10px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .relevance-bar {
            width: 100px;
            height: 6px;
            background: #e0e0e0;
            border-radius: 3px;
            overflow: hidden;
        }

        .relevance-fill {
            height: 100%;
            background: linear-gradient(90deg, #4caf50, #8bc34a);
            transition: width 0.3s;
        }

        .no-results {
            text-align: center;
            padding: 60px 20px;
            color: #666;
        }

        .no-results h3 {
            color: #14b8a6;
            margin-bottom: 15px;
        }

        .no-results .suggestions {
            margin-top: 20px;
            text-align: left;
            display: inline-block;
        }

        .no-results .suggestions h4 {
            color: #14b8a6;
            margin-bottom: 10px;
        }

        .no-results .suggestions ul {
            list-style: none;
            padding: 0;
        }

        .no-results .suggestions li {
            padding: 5px 0;
            color: #666;
        }

        .no-results .suggestions li:before {
            content: "‚Üí ";
            color: #14b8a6;
        }

        .regulations-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .regulation-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .regulation-card:hover {
            border-color: #14b8a6;
            box-shadow: 0 5px 20px rgba(0,51,153,0.2);
            transform: translateY(-5px);
        }

        .regulation-card h3 {
            color: #14b8a6;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .regulation-card .reg-number {
            background: #ccfbf1;
            color: #14b8a6;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.85em;
            display: inline-block;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .back-btn {
            display: inline-block;
            padding: 10px 20px;
            background: #e0e0e0;
            color: #333;
            border-radius: 8px;
            text-decoration: none;
            margin-bottom: 20px;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
            font-size: 16px;
        }

        .back-btn:hover {
            background: #d0d0d0;
        }

        .recent-searches {
            margin-top: 15px;
            padding: 15px;
            background: white;
            border-radius: 10px;
            display: none;
        }

        .recent-searches h4 {
            color: #14b8a6;
            font-size: 0.9em;
            margin-bottom: 10px;
        }

        .recent-tag {
            display: inline-block;
            padding: 6px 12px;
            background: #f8f9fa;
            border: 1px solid #e0e0e0;
            border-radius: 15px;
            margin: 4px;
            font-size: 0.85em;
            cursor: pointer;
            transition: all 0.2s;
        }

        .recent-tag:hover {
            background: #ccfbf1;
            border-color: #14b8a6;
            color: #14b8a6;
        }

        footer {
            background: #f8f9fa;
            padding: 20px;
            text-align: center;
            color: #666;
            border-top: 2px solid #e0e0e0;
        }

        @media (max-width: 768px) {
            .regulations-grid {
                grid-template-columns: 1fr;
            }
            
            header h1 {
                font-size: 1.5em;
            }
            
            .search-options {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìö Mauro's Idiot Guide to EU Asylum Pact</h1>
            <p>Making asylum law actually understandable!</p>
        </header>

        <div class="search-section">
            <div class="search-container">
                <input type="text" 
                       id="searchInput" 
                       placeholder="Try: 'Article 12', 'family reunification', 'screening procedure'..."
                       autocomplete="off">
                <button class="clear-btn" id="clearBtn">√ó</button>
                <div class="search-suggestions" id="suggestions"></div>
            </div>

            <div class="search-options">
                <div class="search-type">
                    <label>
                        <input type="radio" name="searchType" value="all" checked>
                        All
                    </label>
                    <label>
                        <input type="radio" name="searchType" value="article">
                        Articles Only
                    </label>
                    <label>
                        <input type="radio" name="searchType" value="keyword">
                        Keywords
                    </label>
                    <label>
                        <input type="radio" name="searchType" value="regulation">
                        Regulations
                    </label>
                </div>
            </div>

            <div class="filter-tabs">
                <div class="filter-tab active" data-filter="all">All Documents</div>
                <div class="filter-tab" data-filter="regulations">Regulations</div>
                <div class="filter-tab" data-filter="directives">Directives</div>
                <div class="filter-tab" data-filter="guidelines">EUAA Guidelines</div>
            </div>

            <div class="recent-searches" id="recentSearches">
                <h4>Recent Searches:</h4>
                <div id="recentTags"></div>
            </div>
        </div>

        <div class="content-area">
            <div id="regulationsView" class="regulations-view">
                <h2 style="color: #14b8a6; margin-bottom: 20px;">Browse All Documents</h2>
                <div class="regulations-grid" id="regulationsGrid"></div>
            </div>

            <div id="searchResults" style="display: none;">
                <button class="back-btn" onclick="showBrowse()">‚Üê Back to Browse</button>
                <div class="search-stats" id="searchStats"></div>
                <div id="resultsContainer"></div>
            </div>
        </div>

        <footer>
            <p><strong>Official Sources:</strong> 
                <a href="https://eur-lex.europa.eu/" target="_blank">EUR-Lex</a> | 
                <a href="https://euaa.europa.eu/" target="_blank">EUAA</a>
            </p>
        </footer>
    </div>

    <script>
        let database = null;
        let recentSearches = [];
        let searchTimeout = null;

        // Sample enhanced database with more searchable content
        const enhancedDatabase = {
            "regulations": [
                {
                    "id": "2024_1348",
                    "title": "Asylum Procedure Regulation",
                    "short_title": "APR",
                    "number": "2024/1348",
                    "type": "regulation",
                    "adopted": "2024-05-14",
                    "application": "2026-06-12",
                    "eur_lex_url": "https://eur-lex.europa.eu/legal-content/EN/TXT/HTML/?uri=CELEX:32024R1348",
                    "description": "Establishing a common procedure for international protection in the Union",
                    "keywords": ["asylum", "procedure", "application", "interview", "decision", "appeal", "admissibility"],
                    "articles": [
                        {
                            "number": "1",
                            "title": "Subject matter and scope",
                            "content": "This Regulation establishes a common procedure for granting and withdrawing international protection..."
                        },
                        {
                            "number": "12",
                            "title": "Right to remain",
                            "content": "Applicants shall be allowed to remain in the Member State pending the examination of their application..."
                        },
                        {
                            "number": "15",
                            "title": "Personal interview",
                            "content": "Before a decision is taken, the determining authority shall give the applicant the opportunity of a personal interview..."
                        }
                    ]
                },
                {
                    "id": "2024_1356",
                    "title": "Screening Regulation",
                    "short_title": "Screening",
                    "number": "2024/1356",
                    "type": "regulation",
                    "adopted": "2024-05-14",
                    "application": "2026-06-12",
                    "eur_lex_url": "https://eur-lex.europa.eu/eli/reg/2024/1356/oj/eng",
                    "description": "Introducing the screening of third-country nationals at the external borders",
                    "keywords": ["screening", "border", "identification", "security", "health check", "fingerprints"],
                    "articles": [
                        {
                            "number": "1",
                            "title": "Subject matter",
                            "content": "This Regulation establishes screening of third-country nationals at the external borders..."
                        },
                        {
                            "number": "4",
                            "title": "Screening procedure",
                            "content": "The screening shall include identification, security checks, health screening..."
                        }
                    ]
                },
                {
                    "id": "2024_1351",
                    "title": "Asylum and Migration Management Regulation",
                    "short_title": "AMMR (Dublin IV)",
                    "number": "2024/1351",
                    "type": "regulation",
                    "adopted": "2024-05-14",
                    "application": "2026-06-12",
                    "eur_lex_url": "https://eur-lex.europa.eu/eli/reg/2024/1351/oj",
                    "description": "Asylum and migration management including responsibility determination and solidarity mechanism",
                    "keywords": ["Dublin", "responsibility", "family reunification", "solidarity", "relocation", "transfer"],
                    "articles": [
                        {
                            "number": "8",
                            "title": "Family members",
                            "content": "Where family members are present in another Member State, that Member State shall be responsible..."
                        }
                    ]
                },
                {
                    "id": "2024_1347",
                    "title": "Qualification Regulation",
                    "short_title": "QR",
                    "number": "2024/1347",
                    "type": "regulation",
                    "adopted": "2024-05-14",
                    "application": "2026-06-12",
                    "eur_lex_url": "https://eur-lex.europa.eu/legal-content/EN/TXT/PDF/?uri=OJ:L_202401347",
                    "description": "Standards for qualification as beneficiaries of international protection",
                    "keywords": ["refugee", "subsidiary protection", "persecution", "serious harm", "exclusion"],
                    "articles": []
                },
                {
                    "id": "2024_1346",
                    "title": "Reception Conditions Directive",
                    "short_title": "RCD",
                    "number": "2024/1346",
                    "type": "directive",
                    "adopted": "2024-05-14",
                    "application": "2026-06-12",
                    "eur_lex_url": "https://eur-lex.europa.eu/eli/dir/2024/1346/oj/eng",
                    "description": "Standards for the reception of applicants for international protection",
                    "keywords": ["reception", "accommodation", "detention", "vulnerable persons", "unaccompanied minors"],
                    "articles": []
                }
            ],
            "euaa_guidelines": [
                {
                    "id": "evidence",
                    "title": "Practical Guide on Evidence and Risk Assessment",
                    "category": "Examination",
                    "url": "https://euaa.europa.eu/publications/practical-guide-evidence-assessment",
                    "keywords": ["evidence", "credibility", "assessment", "COI", "burden of proof"]
                },
                {
                    "id": "interview",
                    "title": "Practical Guide on Personal Interview",
                    "category": "Examination",
                    "url": "https://euaa.europa.eu/publications/practical-guide-personal-interview",
                    "keywords": ["interview", "questioning", "vulnerable persons", "interpretation"]
                }
            ]
        };

        database = enhancedDatabase;

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            renderRegulations();
            loadRecentSearches();
            
            const searchInput = document.getElementById('searchInput');
            const clearBtn = document.getElementById('clearBtn');
            
            searchInput.addEventListener('input', handleSearchInput);
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') performSearch();
            });
            
            clearBtn.addEventListener('click', clearSearch);
            
            // Filter tabs
            document.querySelectorAll('.filter-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    filterResults(tab.dataset.filter);
                });
            });

            // Click outside to close suggestions
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.search-container')) {
                    document.getElementById('suggestions').style.display = 'none';
                }
            });
        });

        function handleSearchInput(e) {
            const query = e.target.value;
            const clearBtn = document.getElementById('clearBtn');
            
            clearBtn.style.display = query ? 'block' : 'none';
            
            // Clear previous timeout
            if (searchTimeout) clearTimeout(searchTimeout);
            
            // Show suggestions after 300ms of no typing
            if (query.length >= 2) {
                searchTimeout = setTimeout(() => showSuggestions(query), 300);
            } else {
                document.getElementById('suggestions').style.display = 'none';
            }
        }

        function showSuggestions(query) {
            const suggestions = document.getElementById('suggestions');
            const results = searchDatabase(query, 5); // Get top 5 suggestions
            
            if (results.all.length === 0) {
                suggestions.style.display = 'none';
                return;
            }
            
            let html = '';
            results.all.slice(0, 5).forEach(item => {
                html += `
                    <div class="suggestion-item" onclick="selectSuggestion('${item.query || query}', '${item.id}')">
                        <div class="type">${item.type.toUpperCase()}</div>
                        <div class="title">${item.title}</div>
                    </div>
                `;
            });
            
            suggestions.innerHTML = html;
            suggestions.style.display = 'block';
        }

        function selectSuggestion(query, id) {
            document.getElementById('searchInput').value = query;
            document.getElementById('suggestions').style.display = 'none';
            performSearch();
        }

        function clearSearch() {
            document.getElementById('searchInput').value = '';
            document.getElementById('clearBtn').style.display = 'none';
            document.getElementById('suggestions').style.display = 'none';
            showBrowse();
        }

        function performSearch() {
            const query = document.getElementById('searchInput').value.trim();
            if (!query) return;
            
            saveRecentSearch(query);
            const results = searchDatabase(query);
            displayResults(results, query);
        }

        function searchDatabase(query, limit = null) {
            const queryLower = query.toLowerCase();
            const searchType = document.querySelector('input[name="searchType"]:checked').value;
            
            let results = {
                regulations: [],
                guidelines: [],
                articles: [],
                all: []
            };
            
            // Search in regulations
            database.regulations.forEach(reg => {
                let score = 0;
                const matchedArticles = [];
                
                // Article number search (highest priority)
                if (searchType === 'all' || searchType === 'article') {
                    const articleMatch = queryLower.match(/article\s*(\d+[a-z]?)/i);
                    if (articleMatch) {
                        const articleNum = articleMatch[1];
                        reg.articles?.forEach(art => {
                            if (art.number === articleNum) {
                                score += 1000;
                                matchedArticles.push(art);
                            }
                        });
                    }
                }
                
                // Title and description search
                if (reg.title.toLowerCase().includes(queryLower)) score += 100;
                if (reg.short_title.toLowerCase().includes(queryLower)) score += 90;
                if (reg.description.toLowerCase().includes(queryLower)) score += 50;
                if (reg.number.includes(queryLower)) score += 80;
                
                // Keywords search
                reg.keywords?.forEach(kw => {
                    if (kw.includes(queryLower) || queryLower.includes(kw)) {
                        score += 30;
                    }
                });
                
                // Article content search
                if (searchType === 'all' || searchType === 'article') {
                    reg.articles?.forEach(art => {
                        if (art.content?.toLowerCase().includes(queryLower)) {
                            score += 40;
                            if (!matchedArticles.includes(art)) {
                                matchedArticles.push(art);
                            }
                        }
                    });
                }
                
                // Fuzzy matching for common typos
                const fuzzyScore = calculateFuzzyScore(queryLower, reg.title.toLowerCase());
                score += fuzzyScore;
                
                if (score > 0) {
                    results.regulations.push({
                        ...reg,
                        score,
                        matchedArticles,
                        type: 'regulation'
                    });
                }
            });
            
            // Search in guidelines
            database.euaa_guidelines.forEach(guide => {
                let score = 0;
                
                if (guide.title.toLowerCase().includes(queryLower)) score += 100;
                if (guide.category.toLowerCase().includes(queryLower)) score += 50;
                
                guide.keywords?.forEach(kw => {
                    if (kw.includes(queryLower) || queryLower.includes(kw)) {
                        score += 30;
                    }
                });
                
                if (score > 0) {
                    results.guidelines.push({
                        ...guide,
                        score,
                        type: 'guideline'
                    });
                }
            });
            
            // Combine and sort all results
            results.all = [...results.regulations, ...results.guidelines]
                .sort((a, b) => b.score - a.score);
            
            if (limit) {
                results.all = results.all.slice(0, limit);
            }
            
            return results;
        }

        function calculateFuzzyScore(query, text) {
            let score = 0;
            const words = query.split(' ');
            
            words.forEach(word => {
                if (word.length >= 3 && text.includes(word)) {
                    score += 10;
                }
            });
            
            return score;
        }

        function highlightText(text, query) {
            if (!query || query.length < 2) return text;
            
            const regex = new RegExp(`(${query})`, 'gi');
            return text.replace(regex, '<span class="highlight">$1</span>');
        }

        function displayResults(results, query) {
            const container = document.getElementById('resultsContainer');
            const stats = document.getElementById('searchStats');
            const totalResults = results.all.length;
            
            if (totalResults === 0) {
                stats.textContent = '';
                container.innerHTML = `
                    <div class="no-results">
                        <h3>No results found for "${query}"</h3>
                        <p>Try different keywords or check your spelling</p>
                        <div class="suggestions">
                            <h4>Try searching for:</h4>
                            <ul>
                                <li>Article numbers (e.g., "Article 12")</li>
                                <li>Topics (e.g., "family reunification", "detention")</li>
                                <li>Procedures (e.g., "screening", "Dublin")</li>
                                <li>Document types (e.g., "APR", "Reception")</li>
                            </ul>
                        </div>
                    </div>
                `;
            } else {
                stats.innerHTML = `Found <strong>${totalResults}</strong> result(s) for "<strong>${query}</strong>"`;
                
                let html = '';
                results.all.forEach(item => {
                    const relevance = Math.min(100, Math.round((item.score / 10)));
                    
                    if (item.type === 'regulation' || item.type === 'directive') {
                        html += `
                            <div class="result-item" onclick="window.open('${item.eur_lex_url}', '_blank')">
                                <div class="badge">${item.number}</div>
                                <h4>${highlightText(item.title, query)}</h4>
                                <div class="meta">${item.short_title} | ${item.type} | Applies: ${item.application}</div>
                                <div class="content">${highlightText(item.description, query)}</div>
                                ${item.matchedArticles && item.matchedArticles.length > 0 ? `
                                    <div style="margin-top: 12px; padding: 10px; background: #f8f9fa; border-radius: 5px;">
                                        <strong>Matched Articles:</strong>
                                        ${item.matchedArticles.map(art => `
                                            <div style="margin-top: 8px;">
                                                <strong>Article ${art.number}:</strong> ${art.title || ''}<br>
                                                <span style="color: #666; font-size: 0.9em;">${highlightText(art.content?.substring(0, 200) + '...', query)}</span>
                                            </div>
                                        `).join('')}
                                    </div>
                                ` : ''}
                                <div class="relevance">
                                    Relevance: 
                                    <div class="relevance-bar">
                                        <div class="relevance-fill" style="width: ${relevance}%"></div>
                                    </div>
                                    ${relevance}%
                                </div>
                            </div>
                        `;
                    } else {
                        html += `
                            <div class="result-item" onclick="window.open('${item.url}', '_blank')">
                                <div class="badge">GUIDELINE</div>
                                <h4>${highlightText(item.title, query)}</h4>
                                <div class="meta">Category: ${item.category} | EUAA Practical Guide</div>
                                <div class="relevance">
                                    Relevance: 
                                    <div class="relevance-bar">
                                        <div class="relevance-fill" style="width: ${relevance}%"></div>
                                    </div>
                                    ${relevance}%
                                </div>
                            </div>
                        `;
                    }
                });
                
                container.innerHTML = html;
            }
            
            document.getElementById('regulationsView').style.display = 'none';
            document.getElementById('searchResults').style.display = 'block';
        }

        function showBrowse() {
            document.getElementById('regulationsView').style.display = 'block';
            document.getElementById('searchResults').style.display = 'none';
            document.getElementById('searchInput').value = '';
            document.getElementById('clearBtn').style.display = 'none';
        }

        function renderRegulations() {
            const grid = document.getElementById('regulationsGrid');
            if (!database) return;
            
            grid.innerHTML = database.regulations.map(reg => `
                <div class="regulation-card" onclick="window.open('${reg.eur_lex_url}', '_blank')">
                    <div class="reg-number">${reg.number}</div>
                    <h3>${reg.short_title}</h3>
                    <p style="color: #666; font-size: 0.9em; line-height: 1.5;">${reg.description}</p>
                    <div style="margin-top: 10px; font-size: 0.8em; color: #999;">
                        <strong>Adopted:</strong> ${reg.adopted}<br>
                        <strong>Applies:</strong> ${reg.application}
                    </div>
                </div>
            `).join('');
        }

        function filterResults(filter) {
            // Implement filtering logic if needed
            console.log('Filter:', filter);
        }

        function saveRecentSearch(query) {
            if (!recentSearches.includes(query)) {
                recentSearches.unshift(query);
                if (recentSearches.length > 5) recentSearches.pop();
                localStorage.setItem('recentSearches', JSON.stringify(recentSearches));
                displayRecentSearches();
            }
        }

        function loadRecentSearches() {
            const saved = localStorage.getItem('recentSearches');
            if (saved) {
                recentSearches = JSON.parse(saved);
                displayRecentSearches();
            }
        }

        function displayRecentSearches() {
            if (recentSearches.length === 0) return;
            
            const container = document.getElementById('recentSearches');
            const tags = document.getElementById('recentTags');
            
            tags.innerHTML = recentSearches.map(query => 
                `<span class="recent-tag" onclick="document.getElementById('searchInput').value='${query}'; performSearch();">${query}</span>`
            ).join('');
            
            container.style.display = 'block';
        }
    </script>
</body>
</html>
